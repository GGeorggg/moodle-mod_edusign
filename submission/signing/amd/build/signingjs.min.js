function initialize(){function a(a,b){var c=a.getBoundingClientRect();return{x:b.touches[0].clientX-c.left,y:b.touches[0].clientY-c.top}}canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");var b=canvas.getBoundingClientRect();canvas.width=b.width,canvas.height=b.height,mousePressed=!1,canvas.addEventListener("touchstart",function(b){mousePos=a(canvas,b);var c=b.touches[0],d=new MouseEvent("mousedown",{clientX:c.clientX,clientY:c.clientY});canvas.dispatchEvent(d)},!1),canvas.addEventListener("touchend",function(a){var b=new MouseEvent("mouseup",{});canvas.dispatchEvent(b)},!1),canvas.addEventListener("touchmove",function(a){var b=a.touches[0],c=new MouseEvent("mousemove",{clientX:b.clientX,clientY:b.clientY});canvas.dispatchEvent(c)},!1),$("#clearCanvas").bind("click",function(){clearCanvas(canvas,ctx)}),$("#id_submitbutton").click(function(){var a=$("#canvas")[0].toDataURL();$('[name="signing"]').val(a)}),$("#canvas").mousedown(function(a){mousePressed=!0,Draw(a.pageX-$(this).offset().left,a.pageY-$(this).offset().top,!1)}),$("#canvas").mousemove(function(a){mousePressed&&Draw(a.pageX-$(this).offset().left,a.pageY-$(this).offset().top,!0)}),$("#canvas").mouseup(function(a){mousePressed=!1}),$("#canvas").mouseleave(function(a){mousePressed=!1}),$(window).resize(function(){var a=canvas.toDataURL();console.log(a);var b=canvas.getBoundingClientRect();canvas.width=b.width,canvas.height=b.height})}function Draw(a,b,c){c&&(ctx.beginPath(),ctx.lineWidth=2,ctx.lineJoin="round",ctx.moveTo(lastX,lastY),ctx.lineTo(a,b),ctx.closePath(),ctx.stroke()),lastX=a,lastY=b}function clearCanvas(a,b){b.clearRect(0,0,a.width,a.height)}function downloadCanvas(a){this.href=a.toDataURL()}function save(){this.href=canvas.toDataURL(),isCanvasBlank(canvas)&&console.log("true"),$("#signing_text").val("this.href")}define(["jquery"],function(a){return{init:function(){initialize()},save:function(){initialize()}}});